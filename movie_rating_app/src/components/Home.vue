<template>
  <v-layout row wrap>
    <v-flex xs4 v-for="movie in movies" :key="movie._id">
      <v-card>
        <v-card-title primary-title>
          <div>
            <div class="headline">
              <v-btn flat v-bind:to="`/movies/${movie._id}`">
              {{ movie.name}}
              </v-btn>
            </div>
            <span class="grey--text">{{ movie.release_year }} ‧ {{ movie.genre }}</span>
          </div>
        </v-card-title>
        {{ movie.description }}
      </v-card>
    </v-flex>
    <!-- <v-flex xs4>
      <v-card>
        <v-card-title primary-title>
          <div>
            <div class="headline">The Terminator 1</div>
            <span class="grey--text">1984 . Science fiction / Action 2h 30m</span>
          </div>
        </v-card-title>
        <v-card-text>
          It's been nearly two years since Superman's (Henry Cavill)
          colossal battle with Zod (Michael Shannon) devastated the city of
          Metropolis. The loss of life and collateral damage left many feeling angry
          and helpless, including crime-fighting billionaire Bruce Wayne (Ben
          Affleck). Convinced that Superman is now a threat to humanity, Batman
          embarks on a personal vendetta to end his reign on Earth, while the
          conniving Lex Luthor (Jesse Eisenberg) 
        </v-card-text>
        <v-card-actions>
          <v-btn flat color="purple">Rate this movie</v-btn>
          <v-spacer></v-spacer>
        </v-card-actions>
      </v-card>
    </v-flex>
    <v-flex xs4>
      <v-card>
        <v-card-title primary-title>
          <div>
            <div class="headline">Logan</div>
            <span class="grey--text">2017 ‧ Drama/Science fiction film ‧ 2h 21m</span>
          </div>
        </v-card-title>
        <v-card-text>
          In the near future, a weary Logan (Hugh Jackman) cares for an
          ailing Professor X (Patrick Stewart) at a remote outpost on the Mexican
          border. His plan to hide from the outside world gets upended when he meets
          a young mutant (Dafne Keen) who is very much like him. Logan must now
          protect the girl and battle the dark forces that want to capture her.
        </v-card-text>
        <v-card-actions>
          <v-btn flat color="purple">Rate this movie</v-btn>
          <v-spacer></v-spacer>
        </v-card-actions>
      </v-card>
    </v-flex>
    <v-flex xs4>
      <v-card>
        <v-card-title primary-title>
          <div>
            <div class="headline">Star Wars: The Last Jedi</div>
            <span class="grey--text">2017 ‧ Fantasy/Science fiction film ‧ 2h 35m</span>
          </div>
        </v-card-title>
        <v-card-text>
          Luke Skywalker's peaceful and solitary existence gets upended
          when he encounters Rey, a young woman who shows strong signs of the Force.
          Her desire to learn the ways of the Jedi forces Luke to make a decision
          that changes their lives forever. Meanwhile, Kylo Ren and General Hux lead
          the First Order in an all-out assault against Leia and the Resistance for
          supremacy of the galaxy.
        </v-card-text>
        <v-card-actions>
          <v-btn flat color="purple">Rate this movie</v-btn>
          <v-spacer></v-spacer>
        </v-card-actions>
      </v-card>
    </v-flex>
    <v-flex xs4>
      <v-card>
        <v-card-title primary-title>
          <div>
            <div class="headline">Wonder Woman</div>
            <span class="grey--text">2017 ‧ Fantasy/Science fiction film ‧ 2h 21m</span>
          </div>
        </v-card-title>
        <v-card-text>
          Before she was Wonder Woman (Gal Gadot), she was Diana, princess
          of the Amazons, trained to be an unconquerable warrior. Raised on a
          sheltered island paradise, Diana meets an American pilot (Chris Pine) who
          tells her about the massive conflict that's raging in the outside world.
          Convinced that she can stop the threat, Diana leaves her home for the first
          time. Fighting alongside men in a war to end all wars, she finally
          discovers her full powers and true destiny.
        </v-card-text>
        <v-card-actions>
          <v-btn flat color="purple">Rate this movie</v-btn>
          <v-spacer></v-spacer>
        </v-card-actions>
      </v-card>
    </v-flex>
    <v-flex xs4>
      <v-card>
        <v-card-title primary-title>
          <div>
            <div class="headline">Dunkirk</div>
            <span class="grey--text">2017 ‧ Drama/Thriller film ‧ 2 hours </span>
          </div>
        </v-card-title>
        <v-card-text>
          In May 1940, Germany advanced into France, trapping Allied troops on the 
          beaches of Dunkirk. Under air and ground cover from British and
          French forces, troops were slowly and methodically evacuated from the beach
          using every serviceable naval and civilian vessel that could be found. At
          the end of this heroic mission, 330,000 French, British, Belgian and Dutch
          soldiers were safely evacuated.
        </v-card-text>
        <v-card-actions>
          <v-btn flat color="purple">Rate this movie</v-btn>
          <v-spacer></v-spacer>
        </v-card-actions>
      </v-card>
    </v-flex>
    <v-flex xs4>
      <v-card>
        <v-card-title primary-title>
          <div>
            <div class="headline">Django</div>
            <span class="grey--text">2017 ‧ Action film ‧ 2 hours </span>
          </div>
        </v-card-title>
        <v-card-text>
          In May 1940, Germany advanced into France, trapping Allied troops on the 
          beaches of Dunkirk. Under air and ground cover from British and
          French forces, troops were slowly and methodically evacuated from the beach
          using every serviceable naval and civilian vessel that could be found. At
          the end of this heroic mission, 330,000 French, British, Belgian and Dutch
          soldiers were safely evacuated.
        </v-card-text>
        <v-card-actions>
          <v-btn flat color="purple">Rate this movie</v-btn>
          <v-spacer></v-spacer>
        </v-card-actions>
      </v-card>
    </v-flex>
    <v-flex xs4>
      <v-card>
        <v-card-title primary-title>
          <div>
            <div class="headline">The Terminator 1</div>
            <span class="grey--text">1984 . Science fiction / Action 2h 30m</span>
          </div>
        </v-card-title>
        <v-card-text>
          It's been nearly two years since Superman's (Henry Cavill)
          colossal battle with Zod (Michael Shannon) devastated the city of
          Metropolis. The loss of life and collateral damage left many feeling angry
          and helpless, including crime-fighting billionaire Bruce Wayne (Ben
          Affleck). Convinced that Superman is now a threat to humanity, Batman
          embarks on a personal vendetta to end his reign on Earth, while the
          conniving Lex Luthor (Jesse Eisenberg) launches his own crusade against the
          Man of Steel.
        </v-card-text>
        <v-card-actions>
          <v-btn flat color="purple">Rate this movie</v-btn>
          <v-spacer></v-spacer>
        </v-card-actions>
      </v-card>
    </v-flex> -->

  </v-layout>
</template>

<script>
import axios from 'axios';

export default {
  name: 'HelloWorld',
  data() {
    return {
      msg: 'Welcome to Your Vue.js App',
      movies: [],
    };
  },
  mounted() {
    this.fetchMovies();
  },
  methods: {
  //only registered users can fetch the movies
    async fetchMovies(){
      const token = window.localStorage.getItem('auth');
      return axios({
        method: 'get',
        url: 'http://localhost:8081/movies',
        headers: {
          Authorization: `JWT ${token}`,
          'Content-Type': 'application/json',
        },
      })
      .then ((response)=>{
        this.movies = response.data.movies;
        this.current_user = response.data.current_user;
      })
      .catch(()=>{

      });
    },
    reply(){
      this.msg = "I'm COOL!";
    },
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
h1, h2 {
  font-weight: normal;
}
ul {
  list-style-type: none;
  padding: 0;
}
li {
  display: inline-block;
  margin: 0 10px;
}
a {
  color: #42b983;
}
</style>
